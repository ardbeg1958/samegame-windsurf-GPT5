# DEVPROCESS: README から動くゲームへ — GPT-5 × Windsurf と進めた対話開発記

最終更新: 2025-08-08

これは技術解説ではなく、プロセスに焦点を当てた“読み物”です。最初に与えられた `README.md` から要件化（`REQ.md`）、設計化（`DESIGN.md`）、そして実装と改善を、AI アシスタント（GPT-5/Cascade）と Windsurf を活用してどう進めたかを、ストーリー仕立てでまとめました。

---

## 1. はじまりは README から
最初に渡されたのは、ごくシンプルな `README.md`。ゲームの狙いと、最小限の見た目の方向性だけが書かれていました。ここでのゴールは、**「遊べる Same Game を短時間で組み上げる」**こと。外部依存に頼らず、1 ファイルで完結させる方針に決定しました。

Windsurf を開き、Cascade に問いかけます。「この README から、要件の骨子を起こして」。AI から返ってきたのは、ユーザー操作、スコア、終了条件などの“ゲームとしての最低限”を外さないリストでした。

---

## 2. 要件定義 REQ.md — 言葉にして見える化
次に着手したのが `REQ.md`。クリック/タップ操作、削除のルール、重力落下、列シフト、モーダルでの終了通知——。技術的な解決策はあえて書かず、**「ユーザーの視点でどう動くべきか」**だけを明確化しました。

書き上げたタイミングで、開発者レビュー（ardbeg1958@gmail）へ。フィードバックはシンプルでした。

- 「通知はモーダルで。ボタンはモーダル内にも置こう」
- 「視覚効果やアクセシビリティ（コントラスト、形状表現）に触れておきたい」

この一言で、後の UI 体験が形作られます。REQ は“ぶれない軸”になりました。

---

## 3. 設計 DESIGN.md — 迷子にならない地図
設計では、データ構造（`board[rows][cols]`）、主要アルゴリズム（連結検出→削除→落下→列シフト）、イベントフロー（クリック→判定→反映→終了チェック）を素直に分解。UI は CSS Grid、終了時はオーバーレイでモーダル表示。アクセシビリティの要点（`role="dialog"`, `aria-modal`）も最初から明記しました。

Cascade のよかった点は、**「いま必要な設計粒度」に留める**提案をすること。大規模化する前に、まずは動く最短ルートを描いてから肉付けする。この意識が、実装フェーズの迷いを減らしました。

---

## 4. 実装へ — 小さく作って、すぐ動かす
最初のプロトタイプは 1 つの `index.html` に HTML/CSS/JS を同居させる構成。最短で“遊べる”状態を目指したため、次の順に積み上げました。

1. 盤面生成とクリックでの削除
2. 重力落下と列シフト
3. スコア表示
4. 終了判定とモーダル

この時点で、すでにゲームとして遊べます。ここからが、**実際に動かしてのフィードバックサイクル**の真骨頂です。

---

## 5. フィードバックサイクル — 直す→試す→気づくの連鎖
### エピソード A: リロード時に盤面が出ない
ページを再読み込みするとボードが消える。原因は `hasChildNodes()` がコメントノードに反応して初期化がスキップされること。Cascade が指摘し、`childElementCount` への変更とプレースホルダコメント削除で解決。

### エピソード B: 終了時の体験を“気持ちよく”
「もう動かせない」瞬間に、画面中央で穏やかに知らせたい。REQ の方針に沿ってモーダルを導入。視覚効果を整え、**モーダル内に「新しいゲーム」**を配置。終わりと始まりの距離が縮まりました。

### エピソード C: 盤面サイズを選べるように
プレイ感の幅を広げるため、ドロップダウンを追加（10×10/10×15/15×10/15×15）。しかし切り替え後に列数が変わらないバグが発生。`renderBoard()` が“初回のみ構築”前提だったため、**毎回 `grid-template-columns` を更新し、セル総数が合わなければ再構築**する方式に修正。

### エピソード D: はみ出す盤面、どう整える？
列数が増えると収まりきらない。`updateGridMetrics()` を作って、コンテナ幅と列数から `--cell-size` を算出（28〜44pxの範囲）。ウィンドウリサイズにも追従。見た目の崩れが消え、ゲーム“らしさ”が一段上がりました。

### エピソード E: コンソールの a11y 警告
モーダルを隠す際に子要素へフォーカスが残り、`aria-hidden` と衝突。`inert` を導入し、表示時はモーダルへフォーカス、非表示時はヘッダーのボタンへフォーカスを戻す流れで解消。**気持ちよさと正しさ**を両立しました。

---

## 6. GPT-5 × Windsurf で回した“対話駆動開発”
- **Windsurf の即時性**: ファイルを開く→実行→見た目とログを確認→そのまま編集。このループが“秒”単位で回る。
- **Cascade の伴走**: 現象を言葉で投げると、原因候補と修正パッチが返ってくる。過剰設計に走らず、必要十分で提案してくれるのが助かる。
- **ドキュメント同時進行**: 実装の節目ごとに `REQ.md` と `DESIGN.md` を更新。レビュー（ardbeg1958@gmail）時も、この 2 枚があるだけで議論が早い。

結果として、“小さく作って素早く直す”が自然に身につきました。AI は「仕様を決める相棒」であり、Windsurf は「手を止めない作業台」でした。

---

## 7. 学びとコツ（これからやる人へ）
- **要件→設計→実装を薄く速く**: 最初は 7割で十分。残りの3割は動かしてから学ぶ。
- **見た目の違和感を言語化**: 「列が増えない」「はみ出す」「警告が出た」——現象を短文で伝えると AI の返答精度が上がる。
- **ドキュメントを“現在形”で保つ**: 修正のたびに REQ/DESIGN を更新。レビューの摩擦が激減。
- **小さくコミット**: ロールバックのコストを下げ、勇気を増やす。

---

## 8. おわりに — 遊べるまでの最短距離
README から始まり、REQ と DESIGN を経て、モーダルの気持ちよさや a11y の正しさまで、すべては**動かしながら**改善されました。GPT-5/Cascade と Windsurf は、初心者でも“作りながら学ぶ”を後押ししてくれる心強い相棒です。次は、キーボード操作やスコアの保存、テーマ切替など、あなたのアイデアでゲームを育ててください。
