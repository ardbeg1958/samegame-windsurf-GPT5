# Changelog

## v0.3.0 — 2025-01-17

### Release Summary
- 目的: ローカルストレージベースのハイスコアランキング機能を実装し、プレイヤーの成績記録・確認・新記録通知機能を提供。

### New Features
- **ハイスコアランキング機能**: 上位10位までのスコア記録・表示システム
  - 自動スコア保存: ゲーム終了時に日時・盤面サイズと共に記録
  - ランキング表示: 順位バッジ付きテーブル形式での表示
  - 新記録通知: ハイスコア達成時の特別視覚効果とアニメーション
  - データ管理: ハイスコアリセット機能（確認ダイアログ付き）

- **堅牢なエラーハンドリング**:
  - ローカルストレージ容量不足時の自動対応
  - データ破損時の自動修復機能
  - 視覚的エラー通知システム（回復可能/重大エラーの区別表示）

- **完全なアクセシビリティ対応**:
  - ARIA属性による適切な情報提供
  - キーボードナビゲーション対応
  - スクリーンリーダー対応
  - フォーカス管理機能

- **レスポンシブデザイン**: モバイル・タブレット・デスクトップ対応

### Bug Fixes
- 新しいゲームボタンのセレクター問題を修正（ハイスコアダイアログから戻った後の動作不良）

### Technical Implementation
- `HighScoreManager`クラス: 完全なスコア管理システム
- プロアクティブストレージ管理: 古いデータの自動削除
- 段階的リトライロジック: クォータ超過エラーの自動対応
- データ検証・修復機能: 破損データの自動復旧

### Developer Notes
- 影響範囲: `index.html`（HighScoreManagerクラス、UI拡張、エラーハンドリング）
- 互換性: 既存機能への影響なし、新機能として追加
- データ保存: ブラウザローカルストレージ使用（最大10件、約1KB以下）
- コミット: `58abff7` feat: ハイスコアランキング機能の完全実装

### Verification
- 全12タスク完了、全6要件達成
- スコア自動保存・ランキング表示・新記録通知の動作確認
- エラーハンドリング・アクセシビリティ・レスポンシブデザインのテスト完了
- 既存機能との互換性確認完了

## v0.2.1 — 2025-08-09

### Release Summary
- 目的: サイズ変更時（10×10→10×15 等）の横はみ出しを解消。

### Bug Fixes
- 盤面セルの最小サイズを 36px→28px に調整し、15 列時でもボード内に収まるように更新。
- `updateGridMetrics()` の JS 側の下限を CSS の `clamp(28px, 5.2vw, 44px)` と整合。

### Developer Notes
- 影響範囲: `index.html`（グリッド計算の下限値）。
- 互換性: 10×10 など従来サイズには視覚的影響なし。
- コミット: `8451be4` fix(board): prevent overflow at 10×15 by lowering min cell size to 28px。

### Verification
- サイズセレクトで 10×15 / 15×15 を選んでも横スクロールや駒のはみ出しがない。
- ウィンドウ幅を縮小・拡大してもボード内に収まる。
- キーボード操作・スコア更新に回 regress なし。コンソールエラーなし。

## v0.2.0 — 2025-08-09

### Release Summary
- 目的: 盤面のキーボード操作、モーダルのフォーカストラップ、低モーション対応、タッチ目標拡大でアクセシビリティを強化。
- 追加: JP/EN の貢献ガイドとアクセシビリティチェックリスト。

### New Features
- キーボード操作: 盤面セルにロービング `tabindex` を導入。矢印キーで移動、Enter/Space で削除実行。
- フォーカストラップ: 終了ダイアログ表示中、背景を `inert` 化しフォーカス循環をモーダル内に限定。
- 低モーション配慮: `prefers-reduced-motion: reduce` でアニメーション/トランジション抑制。
- タッチ目標: セルの最小サイズを 36px に拡大。

### Documentation
- `AGENTS.md`: 貢献ガイドを追加（英日対応）。
  - 構成/コマンド/コーディング規約/テスト/PR要件。
  - 日本語テンプレ（コミット例・PRテンプレ・QAチェック）。
  - 英日アクセシビリティチェックリスト。

### Developer Notes
- 影響範囲: `index.html`（ARIA属性、キーボード操作、CSSメディアクエリ、フォーカストラップ）。
- 互換性: 破壊的変更なし。UI/操作性のみ改善。
- コミット: `822f723` feat(a11y): keyboard navigation, modal focus trap, reduced motion, larger touch targets。

### How To Run
- 直接: `open index.html`
- ローカルサーバ（推奨）: `python3 -m http.server 5173` → `http://localhost:5173/index.html`

### Verification
- Tab 移動順が期待通り（ヘッダー → 盤面 → フッター）。
- 盤面上で矢印キー移動、Enter/Space で削除できる。
- 終了ダイアログ表示時、背景にフォーカスできない（`inert`）。
- 動きを減らす設定でアニメーションが抑制される。
- スコア/状態更新が `aria-live` で読み上げられる。
